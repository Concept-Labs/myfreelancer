void function(){"use strict";function w(W){var b=null,q,g,c=W.length,f,h=[];for(q=0;q<c;++q)if((f=W[q])&&f.ajs&&f instanceof u)for(b=0,g=f.length;b<g;++b)h.push(f[b]);else"string"===typeof f&&(f=a.createTextNode(f)),f.nodeType&&h.push(f);if(1===(c=h.length))b=h[0];else for(b=a.createDocumentFragment(),q=0;q<c;++q)b.appendChild(h[q]);return b}function n(a,b,q,g,f){if((f=String(f||""))&&a.test(f))for(a=7;a--;)~f.indexOf(this[a+b])&&(f=f.replace(this[a+q],this[a+g]));return f}function m(a,b){var q=0,g="length"in
this&&!("nodeType"in this)&&this.length||0,f=g&&this[0]||this,c,h,d;b=b.replace(x," ").split(A);d=G&&(2===G||1===b.length?2:1);do f&&(l(f)&&d&&"string"==typeof a?(f=f.classList,2===d?f[a].apply(f,b):Array.forEach(b,f[a].bind(f))):"string"===typeof(c=f[y])&&((h=c.length)?(c=(" "+c+" ").replace(x),h=c.length,c=Array.reduce(b,a,c)+""):c=b.join(" "),h!==c.length&&(f[y]=c.trim()))),f=q++<g?this[q]:null;while(f);return this}function z(a,b){return l(b)&&Array.every(a,G?b.classList.contains.bind(b.classList):
ea.bind(null,(" "+b[y]+" ").replace(x," ")))}function l(a){return a&&1===a.nodeType}function e(){this.cancelBubble=!0}function t(){this.returnValue=!1}function C(b,O,q){q=q||h.event;q.__fixed||(q.target||(q.target=q.srcElement||a),3===q.target.nodeType&&(q.target=q.target.parentNode),q.currentTarget||(q.currentTarget=O),!q.relatedTarget&&q.fromElement&&(q.relatedTarget=q.fromElement===q.target?q.toElement:q.fromElement),q.stopPropagation||(q.stopPropagation=e),q.preventDefault||(q.preventDefault=
t),!q.which&&"button"in q&&(q.which=q.button&1?1:q.button&2?3:q.button&4?2:0),q.__fixed=!0);return b.call(this,q)}function p(a,b,q,g){q=q.split(A);var f=0,c,h="length"in a&&!("nodeType"in a)&&a.length||0,d=h&&a[0]||a,k=q.length,s,x,y;if(d){do{if(Object.isObject(d)&&d[X])for(c=0;c<k;c++)s=q[c],Q||(d[H]=d[H]||u.gid++,g[H]=g[H]||u.gid++,s="on"+s,x=d[H]+"_"+s+"_"+g[H],y=null,"object"===typeof g&&(y=g,g=u.__processHandler(g)),g=v[x]=v[x]||C.bind(y||d,g,d)),d[b?X:fa](s,g,!1);d=f++<h?a[f]:null}while(d)}return a}
function c(a,b){if(void 0!==b){var q={};q[a]=b;return q}return a}function s(b,f){for(var q,c=[],h=0,d=b.length,k=f.indexOf(" "),x=(~k?f.substr(0,k):f).replace(A),y,e;h<d;h++)q=b[h],~k&&B?q=q.querySelectorAll(f):(e=x.substr(1),y=x.charAt(0),"#"===y?q=(q=a[ga](e))?[q]:[]:"."===y?q=ha(e.replace(g," "),q):(y=x.split("."),q=q[Y](y[0]),q=F(x,".")?r(q,null,y.slice(1)):Array.from(q))),q.length&&(~k&&!B&&(q=s(q,f.substr(k+1))),c=c.concat(D.call(q,0)));return c}function r(a,b,q){var f=[],c=0,h=a.length,d;b&&
(b=b.toUpperCase());for(q&&"string"==typeof q&&(q=q.replace(g," ").split(A));c<h;c++)d=a[c],!l(d)||(b&&b!=d.tagName.toUpperCase()||q&&!z(q,d))||f.push(d);return f}var h=this,k={},d;d="0.13.3";parseFloat(d)||(d="0.13.0");k.version=d;h["ajs"+k.version]=k;h.ajs||(h.ajs=k);Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if(1<arguments.length){var q=D.call(arguments,1);return function(){return b.apply(a,q.concat(D.call(arguments,0)))}}return function(){return b.apply(a,arguments)}});
var a=h.document,b="attachEvent"in a&&"all"in a&&"uniqueID"in a.documentElement&&+((/msie (\d+)/i.exec(navigator.userAgent)||[])[1]||0)||null,g=/\./g,f=/^\d+/,A=/\s+/,x=/[\r\n\t]/g,y="className",ga="getElementById",Y="getElementsByTagName",v={},Q="addEventListener"in a,X=Q?"addEventListener":"attachEvent",fa=Q?"removeEventListener":"detachEvent",B=!!a.querySelectorAll,ia={fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},D=(d=Array.prototype).slice,Z=d.forEach,
I=d.filter,J=d.reduce,K=d.every,$=d.some,ja=/^\s+/,ka=/\s/,la="a"!=Object("a")[0]||!(0 in Object("a")),M=function(a,b){if(null==a&&!b)throw new TypeError;return la&&"string"==typeof a&&a?String.prototype.split.call(a,""):Object(a)},ma=String.prototype.trim||function(){for(var a=this.replace(ja,""),b=a.length;ka.test(a.charAt(--b)););return a.slice(0,b+1)},F;d="\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff";var aa,
ba,na=Function.prototype.apply,R=Function.prototype.call,S=function(a,b,q){return na.call(a,b,D.call(arguments,2))},L=R.bind(Object.prototype.hasOwnProperty),G="classList"in a.documentElement&&function(a){a.classList.add(1,2);return a.classList.contains(2)?2:1}(a.createElement("b")),ca,da,N=("_"+Math.random()).substr(3,6),H="uuid"+N,T=Object.prototype.toString,E,U;String.prototype.contains||(String.prototype.contains=function(a,b){return!!~String(this).indexOf(a,b|0)});F=R.bind(String.prototype.contains);
Object.create||(Object.create=function(a){var b;null===a?b={__proto__:null}:(b=function(){},b.prototype=a,b=new b,b.__proto__=a);return b});Object.keys||(Object.keys=function(){var a="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),b=!{toString:null}.propertyIsEnumerable(a[0]),q=a.length;return function(g){if("object"!=typeof g&&"function"!=typeof g||null===g)throw new TypeError("Object.keys called on a non-object");var f=[],c;for(c in g)L(g,
c)&&f.push(c);if(b)for(c=0;c<q;c++)L(g,a[c])&&f.push(a[c]);return f}}());Object.isObject=function(a){var b;return!!a&&("object"===(b=typeof a)||"function"===b)};Object.isPlainObject=function(a){return!!a&&"[object Object]"===T.call(a)&&("function"===typeof a.constructor&&"[object Function]"===T.call(a.constructor)||null===a.__proto__)&&!L(a,"callee")};Object.forEach||(Object.forEach=function(a,b,g){if("function"!==typeof b)throw new TypeError(b+" is not a function");var f;if(a)for(f in a)if(L(a,f)&&
!1===b.call(g,a[f],f,a))break});if(!String.prototype.trim||d.trim())d="["+d+"]",aa=RegExp("^"+d+d+"*"),ba=RegExp(d+d+"*$"),String.prototype.trim=function(){return String(this).replace(aa,"").replace(ba,"")};Function.prototype.throttle||(Function.prototype.throttle=function(a,b){var g=this,f,c;return function(){var d;c=arguments;f||(d=function(){f=null;c&&(g.apply(this,c),c=null,f=setTimeout(d,a))}.bind(b||this),d())}});Function.prototype.debounce||(Function.prototype.debounce=function(a,b){var g=
this,f;return function(){clearTimeout(f);f=setTimeout(function(a){g.apply(this,a)}.bind(b||this,arguments),a)}});Number.isNumber||(Number.isNumber=function(a){return!h.isNaN(h.parseFloat(a))&&h.isFinite(a)});Number.isNumeric=function(a){return!h.isNaN(h.parseFloat(a))&&h.isFinite(a)};Number.isFinite||(Number.isFinite=function(a){return"number"===typeof a&&h.isFinite(a)});Number.isInteger||(Number.isInteger=function(a){return Number.isFinite(a)&&-9007199254740992<=a&&9007199254740992>=a&&Math.floor(a)===
a});var u=function(b,g){if(!(this instanceof u))return new u(b,g);if(b&&b.ajs===N&&b instanceof u)return b;this.length=0;this.selector="string"==typeof b?b:"";if(b)if("body"===b)this[0]=a.body,this.length=1;else if(b===h)this[0]=h,this.length=1;else if("string"===typeof b)if(this.context=g=g||a,"<"==b.charAt(0)){var f=a.createElement("div");f.innerHTML=b;this.push(f.childNodes)}else this.push(s(u(g),b));else b&&(1==b.nodeType||9==b.nodeType?(this[0]=b,this.length=1):this.push(b));return this};Array.forEach||
(Array.forEach=Z?function(a,b,g){return Z.apply(a,D.call(arguments,1))}:function(a,b,g){for(var f=M(a),c=f.length>>>0,d=-1;++d<c;)d in f&&S(b,g,f[d],d,a)});Array.filter||(Array.filter=I?function(a,b,g){return I.apply(a,D.call(arguments,1))}:function(a,b,g){a=M(a);for(var f=a.length>>>0,c=[],d,h=0;h<f;h++)h in a&&(d=a[h],S(b,g,d,h,a)&&c.push(d));return c});Array.reduce||(Array.reduce=J?function(a,b,g){return J.apply(a,D.call(arguments,1))}:function(a,b,g){var f=M(a),c=f.length>>>0,d=0;if(0===c&&1>=
arguments.length)throw new TypeError("Array length is 0 and no second argument");for(void 0===g&&(g=(++d,f[0]));d<c;++d)d in f&&(g=b.call(void 0,g,f[d],d,f));return g});U=K?null:function(a,b,g,f){void 0===f&&(f=!0);var c=f;Array.forEach(a,function(a,d){c==f&&(c=!!S(b,g,a,d,this))},a);return c};Array.every||(Array.every=K?function(a){return K.apply(a,D.call(arguments,1))}:function(a,b,g){return U(a,b,g)});Array.some||(Array.some=$?function(a){return $.apply(a,D.call(arguments,1))}:function(a,b,g){return U(a,
b,g,!1)});u.forEach=Array.forEach;u.filter=Array.filter;u.reduce=Array.reduce;u.every=Array.every;u.some=Array.some;Array.isArray||(Array.isArray=function(a){return"[object Array]"===T.call(a)});Array.from||(Array.from=function(a){if(a.toArray)return a.toArray();a=M(a,!0);var b=a.length>>>0,g;try{g=D.call(a)}catch(f){}if(g&&g.length===b)return g;g=[];for(var c=0;c<b;c++)c in a&&(g[c]=a[c]);return g});Array.of||(Array.of=function(){return D.call(arguments)});u.extend=function(a){var b=1,g=arguments.length,
f,c,d;if(g){for(;b<g;b++)if(d=arguments[b])for(c in d)L(d,c)&&(null!==(f=d[c])&&void 0!==f)&&(a[c]=f);return a}u.expand(u.fn,a);return this};u.trim=function(a){return null==a?"":ma.call(a)};u.gid=1;u.each=Array.forEach;u.noop=function(a){return a};u.quote=function(a){return(a+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")};u.callAsync=function(a,b,g,f){f&&clearTimeout(f);return setTimeout(function(){a.apply(b||null,g||[])})};E="&#039; &apos; &#39; &quot; &lt; &gt; &amp; ' ' ' \" < > &".split(" ");
for(d=0;14>d;++d)E[d+14]=RegExp(E[d],"g");k.Html||(k.Html={},k.HTML=k.Html);k.Html.escape=n.bind(E,RegExp(E.slice(9,14).join("|")),7,21,0);k.Html.unescape=n.bind(E,RegExp(E.slice(0,7).join("|")),0,14,7);u.inherits=function(a,b,g){a.prototype=Object.create((a.superclass=b).prototype);a.prototype.constructor=a;Object.isObject(g)&&u.extend(a.prototype,g);return a};ca=G?"add":function(a,b){b=" "+b;return F(a,b+" ")?a:a+b};da=G?"remove":function(a,b){b=" "+b+" ";return F(a,b)?a.replace(b," "):a};u.prototype=
u.fn={constructor:u,ajs:N,attr:function(a,b){var g=this[0],f,d,h;if("string"==typeof a&&void 0===b)return g&&(f=a in g||!("getAttribute"in g)?g[a]:g.getAttribute(a)),f;a=c(a,b);f=0;for(d=this.length;f<d;f++)if(g=this[f])for(h in a)b=a[h],h in g||!("setAttribute"in g)?g[h]=b:g.setAttribute(h,b);return this},currentStyle:function(a){if(!this[0])return"";var b,g,f;"getComputedStyle"in h?b=h.getComputedStyle(this[0])[a]:(g=this[0].currentStyle,void 0===(b=g[a])&&("font"==a?(b=""+g[a+"Style"],f=g[a+"Variant"],
b+=f?" "+f:"",f=g[a+"Weight"],b+=f?" "+f:"",f=g[a+"Size"],b+=f?" "+f:"",f=g.lineHeight,b+=f?"/"+f:"",f=g[a+"Family"],b+=f?" "+f:""):"border"==a&&(b=g[a+"Width"]+" "+g[a+"Style"]+" "+g[a+"Color"])));return b},css:function(a,b){var g=this[0],d,h,k;if("string"==typeof a&&void 0===b)return(g=g&&g.style&&g.style[a]||void 0)&&f.test(g)&&(g=parseFloat(g)),g;a=c(a,b);d=0;for(h=this.length;d<h;++d)if((g=this[d])&&(g=g.style))for(k in a)b=a[k],""===b||(isNaN(b)||ia[k])||(b+="px"),g[k]=b;return this},size:function(){return this.length},
push:function(a,b){if(b){var g=u(a);g.prevObject=this;return g}for(var g=this.length=0,f=a.length;g<f;++g)this[g]=a[g],this.length++;return this},each:function(a){for(var b=0,g=this.length,f;b<g;++b)a.call(f=this[b],b,f,this);return this},eq:function(a){return this.push(this[a],1)},filter:function(a){a=a.split(".");return this.push(r(this,a[0],a[1]),1)},find:function(a){return this.push(s(this,a),1)},children:function(a){if(this[0]){var b=this[0].childNodes;return this.push(void 0===a?b:b[a],1)}return this.push(0,
1)},end:function(){return this.prevObject||u()},parent:function(){var a=this[0],b=a&&a.parentElement||null;if(a&&!("parentElement"in a)&&!b)for(b=a&&a.parentNode;b&&1!=b.nodeType;)b=b.parentNode;return this.push(b,1)},html:function(a){return void 0===a?this[0]&&this[0].innerHTML:this.each(function(){this.innerHTML=a})},val:function(a){if(void 0===a)return this[0]&&this[0].value||"";for(var b=this.length,g;b--;)if(g=this[b])g.value=a,g.setAttribute("value",a);return this},append:function(a){var b=
this[0];b&&b.appendChild(w(arguments));return this},prepend:function(a){var b=this[0];b&&b.insertBefore(w(arguments),b.firstChild);return this},after:function(a){var b=this[this.length-1];b&&b.parentNode&&b.parentNode.insertBefore(w(arguments),b.nextSibling);return this},before:function(a){var b=this[0];b&&b.parentNode&&b.parentNode.insertBefore(w(arguments),b);return this},remove:function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})},bind:function(a,b){return p(this,
1,a,b)},unbind:function(a,b){return p(this,0,a,b)},trigger:function(a){return this.each(function(){try{this[a]()}catch(b){console.log&&console.log(this,a)}})},one:function(a,b){return this.bind(a,function P(){u(this).unbind(a,P);return b.apply(this,arguments)}.bind(this))},hasClass:function(a){a=z.bind(null,a.replace(x," ").split(A));return"length"in this?Array.some(this,a):a(this)},addClass:function(a){return m.call(this,ca,a)},removeClass:function(a){return m.call(this,da,a)},toggleClass:function(a,
b){var g="length"in this&&!("nodeType"in this)?this:[this];return((void 0===b?!u.fn.hasClass.call(g,a):b)?u.fn.addClass:u.fn.removeClass).call(g,a)},hasMod:function(a){if(!a)return!1;a=function(a){return a.className&&this.test(a.className)}.bind(RegExp("(_"+a.trim().replace(/\s/g," _")+"(\\s|$))","g"));return"length"in this&&!l(this)?Array.some(this,a):a(this)},addMod:function(a){return m.call(this,function(a,b){a&&!F(a,b)&&(a=a.trim(),a+=" "+a.replace(/(\s|$)/g,b+"$1"));return a},"_"+a.trim().replace(/\s/g,
" _"))},removeMod:function(a){return m.call(this,function(a,b){a&&F(a,b)&&(a=a.trim(),a=" "+a.replace(RegExp("(\\s|^)[\\w-_]+"+b+"(?=\\s|$)","g"),""));return a.trim()},"_"+a.trim().replace(/\s/g," _"))},toggleMod:function(a,b){var g="length"in this&&!("nodeType"in this)?this:[this];return((void 0===b?!u.fn.hasMod.call(g,a):b)?u.fn.addMod:u.fn.removeMod).call(g,a)},closest:function(b,g){var f=this[0],c;g&&!l(g)&&(g=null);if(f){b=b.split(".");c=b[0]?b[0].toUpperCase():!1;b=b[1]?b.slice(1):!1;do if(l(f)&&
!(c&&f.tagName.toUpperCase()!=c||b&&!z(b,f)))return this.push(f,1);while(f&&(!g||g!=f)&&(f=f.parentNode)&&f!==a.body)}return this.push(void 0,1)},show:function(){var a=this.css("display");return"none"==a?this.css("display",""):a},hide:function(){return this.css("display","none")},toggle:function(a){void 0===a&&(a="none"==this.css("display"));return this[a?"show":"hide"]()},add:function(a,b){var g=u(a),f=0,c=this.length,d;b&&(g=g.filter(b));for(d=g.length;f<d;++f)this[f+c]=g[f];this.length+=d}};Array.forEach(["add",
"remove","has","toggle"],function O(a,b,g,f){var c=a+(f||"Class");c in this.fn&&(this[c]=R.bind(u.fn[c]));f||O.call(this,a,b,g,"Mod")},u);u.get=function q(b,g){q._$_head||(q._$_head=u("head"));var f="ajs__jsonp__"+u.gid++,c=a.createElement("script");c.type="text/javascript";c.src=b+"&callback="+f;h[f]=function(a){g(a);h[f]=null;try{delete h[f]}catch(b){}setTimeout(u.fn.remove.bind(u(c)))};setTimeout(u.fn.append.bind(q._$_head,c))};u.getCaretPosition=function(b,g){if(!g||b==a.activeElement){var f=
(b.nodeName||"").toUpperCase(),c,d,h,k;if("INPUT"==f||"TEXTAREA"==f){if("selectionStart"in b)return{start:+b.selectionStart||0,end:+b.selectionEnd||0};if(a.selection)return(f=a.selection.createRange())&&f.parentElement()==b&&(c=b.value,h=c.length,k=c.replace(/\r\n/g,"\n"),d=b.createTextRange(),d.moveToBookmark(f.getBookmark()),f=b.createTextRange(),f.collapse(!1),-1<d.compareEndPoints("StartToEnd",f)?c=h:(c=-d.moveStart("character",-h),c+=k.slice(0,c).split("\n").length-1,-1<d.compareEndPoints("EndToEnd",
f)||(h=-d.moveEnd("character",-h),h+=k.slice(0,h).split("\n").length-1))),{start:c,end:h}}}};u.setCaretPosition=function P(a,b,g){if(!l(a)&&a&&"length"in a)Array.forEach(a,function(a){P(a,b,g)});else if(a==document.activeElement)if(1==arguments.length?(b=0,g=a.value.length):2==arguments.length&&(g=b),a.setSelectionRange)a.setSelectionRange(b,g);else if(a.createTextRange){var f=a.createTextRange();f.collapse(!0);f.moveEnd("character",g);f.moveStart("character",b);f.select()}};var ea=G?null:function(a,
b){return F(a," "+b+" ")};u.__processHandler=function(a){return"object"===typeof a?a.handleEvent:a};var ha=/\[native\s+code\]/i.test(a.getElementsByClassName)?function(a,b){return b.getElementsByClassName(a)}:function(a,b){return r(b[Y]("*"),null,a)};u.support={oninput:"oninput"in a};u._random_string_=N;u.own=L;"ui"in k||(k.ui={});k.browser||(k.browser={});b?k.browser.msie=b:(d=h.opera)&&"function"==typeof(d=d.version)&&(k.browser.opera=+d());k.$=u;if(!h.CSS||!h.CSS.supports)if(h.CSS||(h.CSS={}),
!h.CSS.supports&&h.supportsCSS)h.CSS.supports=h.supportsCSS.bind(h);else{var V={};h.CSS.supports=function(a,b,g,f,c){var d=f+"\\/"+c;if(d in V)return V[d];if(5>arguments.length)throw Error("WRONG_ARGUMENTS_ERR");var h=(f+"").replace(this,g),k=f&&c&&h in b.style;if(k)if(a)if(/\(|\s/.test(c))try{b.style[h]=c,k=!!b.style[h]}catch(s){k=!1}else b.style.cssText="display:none;height:0;width:0;visibility:hidden;position:absolute;position:fixed;"+f+":"+c,document.documentElement.appendChild(b),k=b.currentStyle[h]==
c,document.documentElement.removeChild(b);else b.style.cssText=f+":"+c,k=b.style[h]==c;b.style.cssText="";return V[d]=k}.bind(/(-)([a-z])/g,b&&10>b,h.document.createElement("_"),function(a,b,g){return g.toUpperCase()})}b=d=E=n=null}.call(this);
void function(w,n){"use strict";function m(){this._asynchMarkers={}}var z=1,l=n._random_string_,e="uuid"+l,t=n.own,C="noprop_"+e,p=["target","preventDefault","isDefaultPrevented","stopImmediatePropagation"],c=Object.isPlainObject,s=n.extend,r=n.__processHandler;s(m.prototype,{constructor:m,buildClassName:function(c,k){k=k||this.$Elm;var d,a,b;-1!=(b=c.indexOf("&"))&&(c=!(d=k.selector)||"."!==(a=d.charAt(0))&&"#"!==a?"":(0<b?c.substr(0,b):"")+d.substr(1)+c.substr(b+1));return c},findSub:function(c){var k=this.$Elm,
d;"string"===typeof c&&((d=c.charAt(0))&&("."!==d&&"#"!==d&&"["!==d)&&(c="."+c),c=this.buildClassName(c));return new n(c,k)},hasTrigger:function(c){var k=this._,d;if(k&&(d=k.__events__))for(c=c.toUpperCase().split(" ");k=c.pop();)if(k in d)return!0;return!1},addTrigger:function(c,k){var d=this._,a;if(k)for(d||(d=this._={}),c=c.toUpperCase().split(" "),(a=d.__events__)||(a=d.__events__={});d=c.pop();)d=a[d]?a[d]:a[d]={},(k[e]||!(k[e]=l+ ++z))&&k[e]in d||(d[k[e]]=k);return this},removeTrigger:function(c,
k){var d=this._,a;if(!(d&&k&&k[e]&&(a=d.__events__)))return this;for(c=c.toUpperCase().split(" ");d=c.pop();)(a=a[d])&&k[e]in a&&delete a[k[e]];return this},fireTrigger:function(h){var k=this,d=k._,a,b,g,f=(g=h&&"object"==typeof h)&&h.type||h,A,x=!1,y=!1,e,m=!0,d=!d||!(a=d.__events__)||!f||!(a=a[f.toUpperCase()]);(e=this._nextTriggerOptions)&&f in e&&(g&&s(h,e[f]),delete e[f]);if(d)return m;g||(h={type:h});if(void 0===h.name||void 0===h.namespace)e=f.split(":"),h.name||(h.name=e[1]||e[0]),h.namespace||
(h.namespace=e.length?e[0]:"");e=Array.reduce(p,function(a,b){a[b]=b in h?h[b]:C;return a},{});h.currentTarget=h.target=this;A=h.preventDefault;h.preventDefault=function(){A&&A.apply(this.context,arguments);x=!0};h.isDefaultPrevented=function(){return x};h.stopImmediatePropagation=function(){e.stopImmediatePropagation?e.stopImmediatePropagation.apply(this.context,arguments):this.stopPropagation&&this.stopPropagation();y=!0};for(b in a)if(t(a,b)&&(g=a[b],"object"===typeof g&&(k=g),(g=r(g))&&!1===(m=
g.call(k,h))&&h.preventDefault(),y))break;!1!==m&&h.isDefaultPrevented()&&(m=!1);Array.reduce(p,function(a,b){a[b]===C?delete h[b]:h[b]=a[b];return a},e);if(c(d=h.nextTriggerOptions))for(b in(e=this._nextTriggerOptions)||(e=this._nextTriggerOptions={}),d)t(d,b)&&c(k=d[b])&&(e[b]||(e[b]={}),s(e[b],k));e=h=g=k=y=x=f=g=a=d=null;return!1!==m},_callAfterTrigger:function(c){return this.fireTrigger(c,c.type+":AFTER")},disable:function(){this.__disabled=!0},enable:function(){this.__disabled=!1},_callTriggerFunctionAsync:function(){var c=
this.currentTarget;if(!1!==this.result&&(!0===this.async&&c._asynchMarkers&&this._asynchMarker===c._asynchMarkers[this.type])&&c instanceof m&&(c._asynchMarkers[this.type]=null,this.type in c))c[this.type](this)}});w.ui||(w.ui={});w.ui.ajsUIComponent=m}.call(null,this.ajs,this.ajs.$);
void function(w,n,m){"use strict";function z(e,t){if(!(this instanceof z))return new z(e,t);e=m(e);if(1<e.size())return Array.reduce(e,function(e,m,c){c&&e.push(new z(m,t));return e},[this]);this.opts=t=m.extend({cnLink:"js-link",cnMenu:"js-menu",cnSection:"js-section",cnExpand:"js-expand",cnHover:"js-hover",cnIndex:0,onselect:m.noop,timeout:1500,hideByClick:!0,autoPos:!1},t);this.$Elm=e;this.$Link=this.findSub(t.cnLink).bind("click mouseout mouseover blur keyup",this).attr("unselectable","off").css({userSelect:"none",
MozUserSelect:"none",WebKitUserSelect:"none",OUserSelect:"none",MSUserSelect:"none"});!1!==t.tabIndex&&this.$Link.attr("tabIndex",n.ui.tabIndex++);this.$Link.find("*").attr({unselectable:"off"});this.$Menu=this.findSub(t.cnMenu).bind("click mouseout mouseover mousedown mouseup",this);this.$Menu.__Sections=this.findSub(t.cnSection);0<=t.cnIndex&&this._onSelect({},this.$Menu.__Sections[t.cnIndex]);Array.forEach(["cnSectionHover","cnSectionExpand"],function(e){var m=this.opts[e];m&&(this.opts[e]=this.buildClassName(m))},
this)}var l=m(w);m.inherits(z,n.ui.ajsUIComponent,{handleEvent:function(e,t){if(!this.__disabled){var l=this.opts,p=e.currentTarget,c=this.$Menu[0],s=this.$Link[0],r;clearTimeout(this._tid);t=t||e.type;switch(t){case "keyup":p===s&&(l=e.keyCode,40==l||38==l||13==l)&&(this.expanded()?13==l?(this._onSelect(e),this._expand(!1)):this._move(40==l?1:-1):13==l&&this.handleEvent(e,"keyup.click"));break;case "blur":this.__down||(p=e.explicitOriginalTarget||w.activeElement,1!=p.nodeType&&(p=p.parentNode),this._hitTest(p)||
this._expand(!1));break;case "click":if(p!==document){if(void 0!=e.detail&&0==e.detail){e.preventDefault();break}if(1<e.which){r=!0;break}}case "keyup.click":p===s?e.preventDefault():p!==document&&this._onSelect(e);if(l.hideByClick||!this._hitTest(e))this._expand(!this.expanded()),r=!0;break;case "mouseup":case "mousedown":this.__down="mousedown"===t;r=!0;break;case "mouseover":p=e.target;do if(m.fn.hasClass.call(p,"js-section")){this._move(p);break}while(p!==c&&p!==s&&(p=p.parentNode));r=!0;break;
case "mouseout":0<l.timeout&&(this._tid=setTimeout(this._expand.bind(this,!1),l.timeout))}r||e.stopPropagation()}},_onSelect:function(e,m){(m||(m=this.$Menu.find("."+this.opts.cnHover)[0]))&&this.opts.onselect.call(this,e,m)},_move:function(e){var l=this.$Menu.__Sections,n=this.opts.cnHover,p=-1;l&&l.length&&(l.each(function(c,s){s=m(s);s.hasClass(n)&&(p=c,s.removeClass(n))}),e&&(e.tagName?m(e).addClass(n):(-1!=p&&(p+=e),l[p]||(p=~e?0:l.length-1),l.eq(p).addClass(n))))},_hitTest:function(e){return!!m(e.target||
e).closest("."+this.opts.cnMenu).size()},_expand:function(e){this.$Elm.toggleClass(this.opts.cnExpand,e);var m=this.$Menu,n,p,c;m.toggle(e);this.opts.autoPos&&(this.$Link[0]&&m[0])&&(e&&(n=this.$Link[0].getBoundingClientRect(),p=m[0].getBoundingClientRect(),c=n.height||n.bottom-n.top),m.css({marginLeft:e?n.left-p.left+"px":0,marginTop:e?n.top+c-p.top+"px":0}));l.unbind("click",this);e&&(this._move(),setTimeout(function(){l.bind("click",this)}.bind(this),0))},expanded:function(){return this.$Elm.hasClass(this.opts.cnExpand)}});
n.ui.tabIndex=n.ui.tabIndex||1;n.ui.dropdown=z}.call(null,this.document,this.ajs,this.ajs.$);
void function(w,n,m){"use strict";function z(c){document.activeElement!=this&&(this.setAttribute("data-prevent-event-focus",1),this.focus());void 0!=c&&n.$.setCaretPosition(this,this.value.length)}function l(c,s,e){void 0===C&&(C=CSS.supports("clip","auto")?"auto":"rect(auto,auto,auto,auto)");if(!s.items)return null;if(!(this instanceof l))return new l(c,s);c=m(c);if(1<c.size())return Array.reduce(c,function(c,d,a){a&&c.push(new l(d,s));return c},[this]);this.opts=s=m.extend({cnForm:"js-form",deleteName:!0,operandClassWrapperMenu:"w-portal-menu__search__operands__menu",
operandClassWrapperInput:"w-portal-menu__search__operands__input"},s);this.$Elm=c;c.bind("scroll",this);c.find(".w-portal-menu__search__operands__width_outer").bind("scroll",this);c.find(".w-portal-menu__search__operands__width_inner").bind("scroll",this);this.$Input=this.$original_Input=e;this.$Input.bind(t,this);this.operandsKeysString="";this.operandsKeys={};this.operandsNames={};this.operands={};this.operandsTabIndex={};var h=!this.opts.order;h&&(h=this.opts.order={});Array.forEach(Object.keys(this.opts.items),
function(c,d){var a=this.opts.items[c];c=c.toUpperCase();this.operandsKeys[c]=a;this.operandsNames[a]=c;this.operands[a]=void 0;this.operandsTabIndex[a]=n.ui.tabIndex++;this.operandsKeysString+="|"+c+"|";h&&(h[c]=d)},this);this.operandsKeysString=this.operandsKeysString.toUpperCase();this.operandsKeysOrder={};this.operandsNamesOrder={};Array.forEach(Object.keys(this.opts.order),function(c){var d=this.opts.order[c];c=c.toUpperCase();this.operandsNamesOrder[this.operandsKeys[c]]=this.operandsKeysOrder[c]=
d},this)}var e=n.browser.msie,t=m.support.oninput&&(!e||9<e)?"input":"input keypress keyup",C,p=m.own;m.inherits(l,n.ui.ajsUIComponent,{handleEvent:function(c){if(!this.__disabled){var e=c.type;if(t.contains(e))return e=c.keyCode,8==e||46==e||37==e||39==e?void 0:this._operandsInput(c);if("click"==e&&"LABEL"==(c.currentTarget.nodeName+"").toUpperCase())return this._operandLabelClick(c);if("scroll"==e)return this.horisontalScroll(c),this._checkLabelsPosition(c),!1;var r,h=m(c.target),k,d,a="data-prev-operand";
if("keydown"==e){k=h.attr("data-operand");d=this.operands[k];e=c.keyCode;if(!d||!e)return;r=m.getCaretPosition(c.target,!0);if(37==e&&0===r.end||39==e&&r.start===h[0].value.length&&(a="data-next-operand")){if(h=h.attr(a),h=this.operands[h])this._currentOperandObject=d,c.preventDefault(),this.selectOperand(h,"data-next-operand"!=a?-1:0),d=h}else 8==e&&0===r.start&&0===r.end?(this._currentOperandObject=d,c.preventDefault(),this.deactivateOperand(k),d=null):8!=e&&46!=e||(!1!==d.stable||!(0===r.start&&
r.end===c.target.value.length||8==e&&1===r.start&&1===r.end))||(c.target.value="",this._currentOperandObject=d,c.preventDefault(),this.deactivateOperand(k),d=null)}else"keyup"==e&&(k=h.attr("data-operand"),d=this.operands[k]);d&&this._checkOperandCaretPosition(d)}},setActiveInput:function(c,e){this.$Input!==c&&this.fireTrigger({type:"operands:activeInputChange",oldInput:this.$Input,newInput:c,isOperandInput:!!c.attr("data-operand"),isNewOperand:e||!1})&&(this.$Input=c)},getCurrentOperand:function(){return this._currentOperandObject},
createOperands:function(c,s,r,h,k){h=void 0==h?1:h;c=c.toUpperCase();var d=this.opts,a=this.$Elm,b=d.operandClassWrapperMenu,g=d.operandClassWrapperInput,f,A,x,y=this.operandsKeys[c],l=this.operandsNamesOrder[y],p=this.$Input[0].getAttribute("data-operand");if(y){x=this.$Input;(d=this.operands[y])?(g=d.$Input,a.css("display","")):(A=a.find("."+g+"_"+y),g=A.find(".portal-menu__search__operands__input__field").attr({tabIndex:this.operandsTabIndex[y]}),a.css("display",""),a=a.find("."+b+"_"+y).css("display",
""),d=this.operands[y]=new n.ui.dropdown(a.find(".portal-menu__search__operands__menu"),{cnLink:"portal-menu__search__operands__menu__button",cnMenu:"portal-menu__search__operands__menu__dropdown",cnExpand:"portal-menu__buttons__item_open",cnHover:"portal-menu__buttons__item_hover",cnIndex:l,timeout:0,tabIndex:!1,autoPos:!0,onselect:function(a,b,g){(b=g&&g.getAttribute("data-operand-name"))&&b!==a&&(g=this.operands[a],((a=this.operands[b])&&!a.isActive||!a&&b in this.operands)&&this.createOperands(this.operandsNames[b],
"",void 0,0),this.deactivateOperand(g.operandName,void 0,a))}.bind(this,y)}),m.bind("labels"in g[0]?g[0].labels[0]:g.closest("label")[0],"click",this),g.bind("focus",this.operandsFocus.bind(this,g,d)).bind(t,this.updateOperandWidth.bind(this,d,null)),b=t+(t.contains("keydown")?"":" keydown"),b+=b.contains("keyup")?"":" keyup",g.bind(b,this),d.operandName=y,d.operandKey=c,d.InputWrapper=A,d.MenuWrapper=a,d.$Input=g,d.$Input.attr("data-operand",y),d.ElementForHeight=m("<span></span>").css({position:"fixed",
top:"-10000px",left:"-10000px",visibility:"hidden",font:d.$Input.currentStyle("font"),padding:d.$Input.currentStyle("padding"),border:d.$Input.currentStyle("border")}),m(w.body).append(d.ElementForHeight));g[0].name=g.attr("data-input-name");d.isActive=!0;d.stable=!0!==k;x.attr("data-operand")?void 0!=r&&(x[0].value=r):(this.opts.deleteName&&(this.$original_Input.__name=this.$original_Input[0].name),this.$original_Input.__value=this.$original_Input[0].value,this.opts.deleteName&&(this.$original_Input[0].name=
""),this.$original_Input[0].value="",this.$original_Input.attr("readonly","true"),this.$original_Input.css("visibility","hidden"),this.$original_Input.attr("data-allow-empty-value","true"));if(x!=d.$Input){if(c=x[0].getAttribute("data-next-operand"))f=this.operands[c],f.$Input.attr("data-prev-operand",y);x!=this.$original_Input&&x.attr("data-next-operand",y);p&&(f=this.operands[p])!=d&&(g.attr("data-prev-operand",p),f.InputWrapper.after(d.MenuWrapper[0]),d.MenuWrapper.after(d.InputWrapper[0]),c?g.attr("data-next-operand",
c):g[0].removeAttribute("data-next-operand"))}d.MenuWrapper.css("display","");d.InputWrapper.css("display","");8>e&&(b=d.MenuWrapper[0].className,d.MenuWrapper[0].className="",d.MenuWrapper[0].className=b);void 0!=s&&(g[0].value=s);(f=this.operands[x[0].getAttribute("data-operand")])&&this.updateOperandWidth(f);this.updateOperandWidth(d);this._checkLabelsPosition();this.setActiveInput(g,!0);0<h&&(2==h&&g.attr("data-prevent-event-focus",1),g[0].focus(),e||n.browser.opera?void 0!=s&&n.$.setCaretPosition(g[0],
s.length):this.__asyncFocusHandler=m.callAsync(z,g[0],[s],this.__asyncFocusHandler));return this._currentOperandObject=d}},deactivateOperand:function(c,e,r){e=void 0==e?1:e;var h,k,d,a,b;if(c=this.operands[c])this._resetLabelsPosition(c),this._currentOperandObject=null,b=c.$Input==this.$Input,a=c.$Input.val(),k=c.$Input[0].getAttribute("data-next-operand"),d=c.$Input[0].getAttribute("data-prev-operand"),this.opts.deleteName&&(c.$Input[0].name=""),c.$Input[0].removeAttribute("data-next-operand"),c.$Input[0].removeAttribute("data-prev-operand"),
c.$Input[0].name="",c.$Input.val(""),k||d||r?(k&&(h=this.operands[k])&&(d?h.$Input[0].setAttribute("data-prev-operand",d):h.$Input[0].removeAttribute("data-prev-operand")),d&&(h=this.operands[d])?(k?h.$Input[0].setAttribute("data-next-operand",k):h.$Input[0].removeAttribute("data-next-operand"),b&&(r||(r=h))):b&&(r||(r=this.operands[k])),r&&this.setActiveInput(r.$Input)):(this.$Elm.css("display","none"),b&&this.setActiveInput(this.$original_Input),this.opts.deleteName&&(this.$Input[0].name=this.$original_Input.__name),
this.$Input[0].removeAttribute("readonly"),this.$Input.css("visibility",""),this.$original_Input[0].removeAttribute("data-allow-empty-value"),this.Suggest&&this.Suggest.applyToInput(this.$Input)),this.$Input[0].value=a&&this.$Input[0].value?this.$Input[0].value+" "+a:this.$Input[0].value||a||"",0<e&&(2==e&&this.$Input.attr("data-prevent-event-focus",1),this.__asyncFocusHandler=m.callAsync(this.$Input[0].focus,this.$Input[0],null,this.__asyncFocusHandler),m.setCaretPosition(this.$Input[0],this.$Input[0].value.length)),
c.MenuWrapper.css("display","none"),c.InputWrapper.css({display:"none",width:"","min-width":""}),r&&(r.isActive||this.createOperands(r.operandKey),this.updateOperandWidth(r),this.selectOperand(r,r.operandName==d?-1:0,0==e)),c.stable=c.isActive=!1},getOperandByKeyOrName:function(c){var e=c;return"object"==typeof e&&e||((e=this.operands[c])||(e=this.operands[this.operandsKeys[c]]))&&e},getOperandKeyByKeyOrName:function(c){return c in this.operandsNames?this.operandsNames[c]:c in this.operandsKeys?c:
null},getOperandValue:function(c){return(c=this.getOperandByKeyOrName(c))&&c.$Input.val()},setOperandValue:function(c,e,m,h){null==e&&(e="");var k=this.getOperandByKeyOrName(c);if(k)if(""===e){if(!m&&k.isActive)return k.$Input.val(e),this.deactivateOperand(k.operandName,0),e}else"none"!=k.MenuWrapper.css("display")||h||(k=this.createOperands(k.operandKey,void 0,void 0,0));else if(!k){if(!(c=this.getOperandKeyByKeyOrName(c)))return;if(""!==e||m)k=this.createOperands(c,e,void 0,0)}k&&(k.$Input.val(e),
this.updateOperandWidth(k));return e},operandsFocus:function(c,e){this._currentOperandObject=e;this.setActiveInput(c)},updateOperandWidth:function(c,e){var m="input"==t?10:20,h,k,d,a;if(c||(c=this._currentOperandObject))k=c.$Input,e=e||k[0].value,d=k[0].getAttribute("data-next-operand"),c.ElementForHeight.html(n.Html.escape(e)),h=c.ElementForHeight[0].clientWidth,22>h&&(h=22),h+=m,d?(m="width",d="minWidth"):(m="minWidth",d="width"),c.InputWrapper.css(m)!=h&&(h+="px",c.InputWrapper.css(m,h),k.css(m,
h),a=!0),c.InputWrapper.css(d)&&(c.InputWrapper.css(d,""),k.css(d,""),a=!0),a&&this._checkLabelsPosition()},selectOperand:function(c,e,l){l||(c.$Input[0].focus(),this.Suggest&&this.Suggest.applyToInput(c.$Input));void 0!==e&&(0>e&&(e=c.$Input.val().length),m.setCaretPosition(c.$Input[0],e));this._checkLabelsPosition();this._currentOperandObject=c},_operandLabelClick:function(c){this.__disabled||(this.$Input[0].focus(),c.preventDefault())},_operandsInput:function(){if(!this.__disabled){var c=this.$Input[0].value,
e,m=c.lastIndexOf(":"),h,k,d=0,a,b,g,f,A,x;f={type:"operands:find",input:this.$Input[0],inputValue:c,newOperand:null,lastPrefixIndex:m,currentOperand:this.$Input.attr("data-operand")||null};if(!1!==this.fireTrigger(f)){c=f.inputValue;h=m=f.lastPrefixIndex;if(a=f.newOperand)b=a,a=this.operandsNames[a];f.currentOperand&&this.$Input.oldValue!==c&&(g=!0,this.$Input.oldValue=c);if(!a&&0<=h){e=c.toUpperCase();for(x=this.operandsKeysString;~(k=x.indexOf(e.substr(--m,h-m),d));)if(124===x.charCodeAt(k+(h-
m)))if(a=e.substr(m,h-m),124===x.charCodeAt(k+(h-m)-a.length-1)){1>m||/\s/.test(e.charAt(m-1))||(a="");break}else a="";else d=k;f.newOperand=a}if(a&&(b||(b=this.operandsKeys[a]),b&&(b in this.operands&&(!this.operands[b]||!this.operands[b].isActive))&&(f.type="operands:activate",f.leftPart=c.substring(0,m).trim(),f.rightPart=c.substring(h+1).trim(),!1!==this.fireTrigger(f))))return""==f.leftPart+f.rightPart&&this._currentOperandObject&&(A=this._currentOperandObject.operandName),c=this.createOperands(a,
f.rightPart,f.leftPart),A&&this.deactivateOperand(A),c;g&&this._checkLabelsPosition()}}},horisontalScroll:function(c){if(!this.__disabled){var e=c.target;this.__scrollContainer||(this.__scrollContainer=e);e.scrollTop=0;c.preventDefault();c.stopPropagation();return!1}},_resetLabelsPosition:function(c){c&&(c.$Elm.css({width:"",height:""}),c.$Link.css({position:"",top:"auto",left:"auto",clip:C}))},_checkLabelsPosition:function(){if(!this.__disabled){var c,e,m,h=this.operands,k=this.$Elm[0].getBoundingClientRect(),
d,a,b,g,f,A=C,x;for(e in h)if(p(h,e)&&(m=h[e])&&m.isActive&&m.$Input){if(c=m.$Input[0]){f=m.$Link[0];x=c;var y=!0;g=void 0;g=m.$Elm[0].getBoundingClientRect();g.left>k.left&&(y=!1);y?(d||(d=x.getBoundingClientRect()),d.right<=k.left?d=!1:(b||(b=f.getBoundingClientRect()),x=b.width||b.right-b.left,g=d.right-30-(k.left+x),d=y=0>g?-g:0)):d=!1;if(!1!==(f=d))break;else d=b=null}c=void 0}this.__prevPositioned_operandObject&&void 0!==c&&this.__prevPositioned_operandObject.$Input[0]!=c&&this._resetLabelsPosition(this.__prevPositioned_operandObject);
c&&(a=m.$Elm)&&(!f||0>f?f=0:(x=b.width||b.right-b.left,A=b.height||b.bottom-b.top,A=["0px",x+"px",A+"px",f+"px"],A="rect("+A.join(",")+")"),e=m.$Link,c.getBoundingClientRect(),a.css({width:e[0].clientWidth,height:e[0].clientHeight}),e.css({position:"absolute",top:0,left:0-f,clip:A}),this.__prevPositioned_operandObject=m)}},_checkOperandCaretPosition:function(c){if(c&&this.__scrollContainer){var e=this.__scrollContainer,l=c.$Input[0],h=l.value;if(h){var k=l.getBoundingClientRect(),d=c.$Link[0].getBoundingClientRect();
k.left>=d.right||(l=m.getCaretPosition(l),h=h.substr(0,l.end),c.ElementForHeight.html(n.Html.escape(h)),c=c.ElementForHeight[0].clientWidth+k.left-(h?10:0),c<d.right&&(k=d.width||d.right-d.left,d=c-(d.left+k),0>d&&(e.scrollLeft+=d)))}}}});n.ui.tabIndex=n.ui.tabIndex||1;n.ui.operands=l}.call(null,this.document,this.ajs,this.ajs.$);
void function(w,n,m){"use strict";function z(l,e){if(!(this instanceof z))return new z(l,e);l=m(l);if(1<l.size())return Array.reduce(l,function(m,c,l){l&&m.push(new z(c,e));return m},[this]);this.opts=e=m.extend({cnForm:"js-form",cnInput:"js-input",cnBlur:"js-blur",cnPlaceholder:"js-placeholder",cnSection:"js-section",cnSectionTxt:"js-section-text",cnSectionLink:"js-section-link",cnSectionMenu:"js-section-menu",cnSectionHover:"js-section-hover",cnSectionExpand:"js-section-expand",cnSectionSelected:"js-section-selected",
paddingRight:35,searchInputResize:!0,useOperands:!1,autoTabIndex:!0},e);this.$Elm=l;this.$Form=this.findSub(e.cnForm).bind("submit",this);this.$Placeholder=this.findSub(e.cnPlaceholder);this.$Input=this.findSub(e.cnInput).bind("focus blur",this);e.autoTabIndex&&this.$Input.attr({tabIndex:n.ui.tabIndex++});this.$Section=this.findSub(e.cnSectionTxt);var t=this.findSub(e.cnSectionLink),C=e.newSubElementsLogic?t:this.$Elm;t.size()&&(this.Sections=new n.ui.dropdown(C,{cnLink:t,cnMenu:e.cnSectionMenu,cnHover:e.cnSectionHover,
cnExpand:e.cnSectionExpand,cnIndex:e.cnSectionIndex,onselect:this._section.bind(this)}));l.find("input").each(function(){"submit"==this.type&&(this.tabIndex=n.ui.tabIndex++)});e.suggest&&(this.Suggest=n.ui.suggest(l,e.suggest));e.operands&&((this.$Operands=new n.ui.operands(this.$Elm.find(".w-portal-menu__search__operands"),e.operands,this.$Input)).addTrigger("operands:activeInputChange",function(e){this.$Input=e.newInput;this.Suggest&&this.Suggest.applyToInput(this.$Input,e.isNewOperand);this.isPlaceholder=
!e.isOperandInput;this._placeholderCheck()}.bind(this)),this.Suggest&&this.Suggest.addTrigger("suggests:mark",function(e){if(e.updateInputValue){var c=e.newSuggestNode,m=e.oldSuggestNode,l=e.newSuggest,c=c&&c.getAttribute("data-search-name"),h,k=this.getCurrentOperand();k&&k.stable||(m&&c!=(h=m.getAttribute("data-search-name"))&&h&&this.deactivateOperand(h,!0),c&&(this.createOperands(this.getOperandKeyByKeyOrName(c),"","",2,!0),k=this.getCurrentOperand(),k.__onblue||(k.__onblue=function(){k.stable=
!0},k.$Input.bind("blur",k.__onblue))));this._checkLabelsPosition();this.updateOperandWidth(void 0,e.updateInputValue?l:void 0)}}.bind(this.$Operands)).addTrigger("suggests:select",function(e){var c=this.getCurrentOperand();c&&c.stable||(c.stable=!0);this._checkLabelsPosition();this.updateOperandWidth(void 0,e.updateInputValue?newSuggest:void 0)}.bind(this.$Operands)));this._placeholderCheck=this._placeholderCheck.bind(this);setTimeout(this._placeholderCheck);m(w).bind("DOMContentLoaded",this._placeholderCheck);
m(window).bind("load",this._placeholderCheck);this.isPlaceholder=!0;this._section({});this.isReady=!0;Array.forEach(["cnBlur","cnSection"],function(e){var c=this.opts[e];c&&(this.opts[e]=this.buildClassName(c))},this)}m.inherits(z,n.ui.ajsUIComponent,{handleEvent:function(m,e){var n=this.isEmpty(),w;switch(e||m.type){case "submit":n&&(this.$Input.trigger("focus"),m.preventDefault());break;case "blur":w=n;default:this.$Elm.toggleClass(this.opts.cnBlur,!(!w||!this.isPlaceholder)),w&&this.val("")}},
_placeholderCheck:function(l){l=l&&l.type;"DOMContentLoaded"===l?(m(w).unbind("DOMContentLoaded",this._placeholderCheck),setTimeout(this._placeholderCheck,20)):"load"===l?(m(window).unbind("load",this._placeholderCheck),setTimeout(this._placeholderCheck,20)):"unknown"!=typeof w.activeElement&&this.$Input[0]===w.activeElement||this.handleEvent({type:"blur"})},_section:function(l,e){var n=this.opts,w=e||l.target,p=n.cnSectionSelected,c=m(w).closest("."+n.cnSection),n=this.findSub(n.cnSection);w&&(n.filter("."+
p).removeClass(p),c.addClass(p));(c=n.filter("."+p))[0]&&(this.$Form.attr({action:c.attr("data-action"),target:c.attr("data-target")||"_self"}),this.$Input.attr("name",c.attr("data-input-name")),this.$Section.html(c.html()),this.Suggest&&this.Suggest.set("ajaxUrl",c.attr("data-suggest-url"),!this.isReady));l&&l.preventDefault&&("click"!=l.type&&13!=l.keyCode||this.$Input.trigger("focus"),l.preventDefault())},isEmpty:function(){return""==this.val()},val:function(l){var e;return void 0!==l?(e=this.__val!=
l,this.$Input.val(l),this.__val=l,e&&this._placeholderCheck(),this):m.trim(this.$Input.val())},getSuggest:function(){return this.Suggest},setPlaceholder:function(m){this.$Placeholder.html(m)},disable:function(){this.$Operands&&this.$Operands.disable();this.Suggest&&this.Suggest.disable();this._placeholderCheck()},enable:function(){this.$Operands&&this.$Operands.enable();this.Suggest&&this.Suggest.enable();this._placeholderCheck()}});n.ui.tabIndex=n.ui.tabIndex||1;n.ui.search=z}.call(null,document,
this.ajs,this.ajs.$);
void function(w,n,m){"use strict";function z(a){return String(a||"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function l(){}function e(a,b){b.data=a.call(this,b.data,b.findValue,b)}function t(a,b,g){var f=g.findLastWord;return g.searchLast?a="function"===typeof f&&!f.test&&f.call?f.call(this,b,this):b.replace(f,""):a}function C(a,b,g){if(!g.searchLast)return b;g=this.__prevSuggest;b=m.trim(b.replace(RegExp(z(g&&g.val||"")+"$"),"")+this.__val).replace(/\S+$/,"")+""+(g.val=a);""!=b&&(b+="");return b}function p(a,
b){if(!(this instanceof p))return new p(a,b);p.superclass.apply(this);a=m(a,void 0);1<a.size()&&(this.__others=Array.reduce(a,function(a,g,c){c&&a.push(new p(g,b));return a},[this]));this.__prevSuggest={};this.__expandedState=!1;var g=b.suggestSeparator,f=b.multiSuggests,c=b.suggestEscapeStart,d=b.suggestEscapeEnd;null!=g&&(g=b.suggestSeparator=RegExp(g instanceof RegExp?g.source:g+"",(g.ignoreCase?"ig":"g")+(g.multiline?"m":"")));void 0===f&&b.searchLast&&(b.getSuggest=t,b.setSuggest=C);c&&d?(c instanceof
RegExp||(b.suggestEscapeStart=RegExp(c+"")),d instanceof RegExp||(b.suggestEscapeEnd=RegExp(d+""))):b.suggestEscapeStart=b.suggestEscapeEnd=null;b.getData&&this.addTrigger("suggests:getData",e.bind(this,b.getData));b.multiSuggests&&!b.setSuggest&&(b.setSuggest=function(a,b){return b});this.opts=b=m.extend(new l,b);this._cache={};this.$Elm=a;this.$Input=null;this.applyToInput(this.findSub(b.cnInput));this.$Suggest=this.findSub(b.cnSuggest).bind("click mousedown",function(a){if(this._down="mousedown"==
a.type)this.__bluredCaret=m.getCaretPosition(this.$Input[0]);this._delayedHideStart()}.bind(this));this.$InternetCont=this.findSub(b.cnInternetCont).bind("click",this.hide.bind(this));this.$Internet=this.findSub(b.cnInternet);this.$List=this.findSub(b.cnList).bind("click",this._selectByClick.bind(this)).bind("scroll",this._onScroll.bind(this)).bind("mousewheel DOMMouseScroll",this._onMouseWheel);b.markByMouseOver&&this.$List.bind("mouseover",this._suggestNodeMouseover.throttle(100,this));b.fetching&&
(this._fetchOnScroll=this._fetchOnScroll.throttle(250,this),this.$List.bind("scroll",function(a){a.preventDefault();a.stopPropagation();this._fetchOnScroll()}.bind(this)));b.expire&&(this.__prevRequestTime=+new Date);m(window).bind("hashchange popstate",this);Array.forEach(["cnItem","cnItemTick","cnSelected","cdGroupHeader","cdSuggestHint"],function(a){var b=this.opts[a];b&&(this.opts[a]=this.buildClassName(b))},this);this._timeoutHandler=function(){var a=this._timeoutFunction,b=this._timeoutArguments;
this._timeoutFunction=this._timeoutArguments=null;a&&(Array.isArray(b)?a.apply(this,b):null!=b?a.call(this,b):a.call(this))}.bind(this);b=null}var c=encodeURIComponent,s=String.prototype.split,r=3!="1_1".split(/(_)/).length?function(a,b){var g=this;if(!(a instanceof RegExp))return void 0===a&&0===b?[]:s.call(g,a,b);var c=[],d=0,e,h,m;a=RegExp(a.source,(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")+"g");g+="";b=void 0===b?4294967295:b>>>0;if(!b)return[];for(;e=a.exec(g);){h=
e.index+e[0].length;if(h>d&&(c.push(g.slice(d,e.index)),1<e.length&&e.index<g.length&&c.push.apply(c,e.slice(1)),m=e[0].length,d=h,c.length>=b))break;a.lastIndex===e.index&&a.lastIndex++}d===g.length?!m&&a.test("")||c.push(""):c.push(g.slice(d));return c.length>b?c.slice(0,b):c}:s,h=n.HTML.escape,k=n.ui.ajsUIComponent,d=Object.isObject;l.prototype={constructor:l,cnInput:"js-input",cnSuggest:"js-suggest",cnList:"&__suggest__inner",cnItem:"&__suggest__item",cnItemTick:"&__suggest__item__tick",cnSelected:"&__suggest__item_selected",
cnInternetCont:"&__suggest__item_internet",cnInternet:"&__suggest__item_internet-link",cdGroupHeader:"&__suggest__group-header",cdSuggestHint:"&__suggest__item__hint",getData:function(a){return(a=a&&a.data||a)&&"OK"==a[1]&&a[2]},template:function(a,b){var g=(d(b)&&(b.suggest||b.text||b.word)||b||"")+"",c=(d(b)&&(b.text||b.word)||b||"")+"",c=h(c),g=h(g);a=h(a);c=c.replace(RegExp(a,"i"),'<b class="'+this.opts.cnItemTick+'">$&</b>');return'<div data-suggest="'+g+'" class="'+this.opts.cnItem+'">'+c+"</div>"},
groupHeaderTemplate:function(a){return'<div class="'+this.opts.cdGroupHeader+'">'+a+"</div>"},templateInternetVal:function(a){return h(a)},request:function(a,b,g){m.get(a,b)},multiSuggests:!1,suggestSeparator:/\s/g,suggestEscapeStart:null,suggestEscapeEnd:null,getSuggest:function(a){return a.trim()},setSuggest:m.noop,minLength:1,maxLength:0,timeout:300,expire:0,autosubmit:!0,ajaxUrl:void 0,searchUrl:"http://go.mail.ru/search?q=#query#",encodeBeforeSend:!0,showInternet:!0,ondraw:m.noop,grouping:!1,
fetching:!1,fetchCount:30,markByMouseOver:!0,autoMarked:-1,undeterminedStage:!0,selectInputDiff:!1,selectByTab:!1,hideInactive:!0,useCache:!0,searchLast:!1,findLastWord:/^.*\s+/,ondata:m.noop,onprint:null,onexpand:m.noop,onsearch:m.noop,onselect:m.noop};m.inherits(p,k,{handleEvent:function(a,b){if(!this.__disabled){var g=a.keyCode,c=this.opts,d=c.hideInactive,e,h,m,k=!0;void 0===b&&(b=b||a.type);if(e=+this.$Input.attr("data-prevent-event-"+b))--e,e?this.$Input.attr("data-prevent-event-"+b,e):this.$Input[0].removeAttribute("data-prevent-event-"+
b);else if(this.blurred=w.activeElement!=this.$Input[0],!this.blurred||"blur"===b){switch(b){case "hashchange":case "popstate":case "blur":this._down&&"blur"===b?this._down&&(this._down=k=!1,w.activeElement!==this.$Input[0]&&(this.$Input.attr("data-prevent-event-focus",1),this.$Input[0].focus(),(h=this.__bluredCaret)&&n.$.setCaretPosition(this.$Input[0],h.start,h.end),this._findValue())):!1!==this._fireActiveEvent(!1)&&(this.blurred=!0,d&&(h=this.__currentMarkedChangeValue,!1!==this.hide()&&(h&&this._onselect(a,
h),m=!0)));break;case "keyup":case "keydown":d=this.isExpanded();if(38!=g&&40!=g||!d)if(39==g&&this.__currentMarkedChangeValue)this._onselect(a,this.__currentMarkedChangeValue);else if(13==g||9==g&&c.selectByTab){if(9==g&&a&&a.ctrlKey)return;"keydown"==b&&d&&(this.__currentMarked?this._onselect(a,this.__currentMarked,!0,c.autosubmit,!1,9==g||39==g):this.hide())}else if(27==g)"keyup"==b&&!1!==this.hide(a)&&(this._findValue(null),a.preventDefault(),m=!0);else{this.handleEvent(a,"keyup"==b?"onprint":
null);return}else"keydown"==b&&this._mark(38==g?-1:0),a.preventDefault(),a.stopPropagation();break;default:if("focus"===b&&!1===this._fireActiveEvent(!0))return;m=this._down=!1;if(!1!==(g=this._checkSomethingIsChanges())&&(this.__currentMarkedChangeValue=this.__currentMarked=null,c.useCache?d=this._cache[g]||null:(this._cache={},d=null),e=c.expire&&this.__prevRequestTime>+new Date+1E3*c.expire,e={type:"suggests:find",originalEvent:a,findValue:0<c.maxLength?g.substr(0,c.maxLength):g,data:d,expire:e},
e.val=e.findValue,!1!==this.fireTrigger(e))){this._loadVal=null;this._internetVal(g);g=g!=e.val?e.val:e.findValue;if(d=e.data)this._cache[g]=d;"onprint"==b&&c.onprint&&c.onprint.call(this,g,this);e.expire&&(this.reset(),d=null);this._tid&&(clearTimeout(this._tid),this._tid=this._timeoutFunction=this._timeoutArguments=null);d?(delete e.expire,this._timeoutFunction=this._rebuild,this._timeoutArguments=e,this._tid=setTimeout(this._timeoutHandler)):this._checkPrevResultIsNotEmpty(g,c)&&(this._timeoutFunction=
this.find,this._timeoutArguments=g,this._tid=setTimeout(this._timeoutHandler,c.timeout))}}m&&this._tid&&(clearTimeout(this._tid),this._tid=this._timeoutFunction=this._timeoutArguments=null);k&&this._delayedHideEnd()}}},applyToInput:function(a,b){this.$Input&&this.$Input.unbind("blur focus click keyup keydown",this);this.$Input=m(a).attr("autocomplete","off").bind("blur focus click keyup keydown",this);!b&&(this.$Suggest&&this.isExpanded())&&this._rebuild(this.__val)},_checkSomethingIsChanges:function(){var a=
this._findValue(),b;if(b=this.__currentMarkedChangeValue)if(b=b.getAttribute("data-suggest"),b==a)return!1;this.__prevSuggest.caret=this.__prevSuggest.val=null;return this._findValue()},_checkPrevResultIsNotEmpty:function(a,b){if(!b.useCache)return!0;for(var c=a.length-1,f,d=this._cache;c>=b.minLength;c--)if(f=a.substr(0,c),void 0!==d[f])return(f=d[f])&&0<f.length;return!0},_closest:function(a,b){var c=this.$List[0];do if(1==a.nodeType&&"getAttribute"in a&&(b=a.getAttribute("data-suggest-idx"),0<
b))return a;while(a&&(a=a.parentNode)&&a!==c)},_suggestNodeMouseover:function(a){if(!this.__disabled){var b;a.target.parentNode&&(b=this._closest(a.target));b&&this._mark(void 0,b,void 0,!1,a)}},_selectByClick:function(a){if(!this.__disabled){var b=this.opts,c=this._closest(a.target);c&&!1!==this._mark(null,c,!0,void 0,a)&&this._onselect(a,c,!0,b.autosubmit);return!1}},_mark:function(a,b,c,f,d){if(!(void 0!==b&&this.__currentMarked===b&&!!this.__currentMarkedChangeValue==f||this.__inFetching)){var e=
this.opts,h=this.$List,k=this.__currentMarked||this.__currentMarkedChangeValue,l,v,n,p=this.__ListItems,r,B,s;void 0===f&&(f=!0);if(p){c=k&&k.getAttribute("data-suggest")||null;r=p.size();l=v=(k&&~~k.getAttribute("data-suggest-idx")||0)-1;if(b)v=~~b.getAttribute("data-suggest-idx")-1;else{v=k?v+(0>a?-1:1):0>a?r-1:0;for(v=v>=r?-1:v;!b&&v<r&&0<=v;)b=p[v],b&&"none"!=b.style.display||(b=null,0>a?v--:v++);if(!b||0>v)v=-1,b=null}s=this.__val;n=null!=s&&this._cache[s];if(!b&&(-1<a&&-1<l&&e.fetching&&!n.EOF)&&
!1!==this._fetchMore(a,this._mark.bind(this,a)))return;(v>=r||0>v)&&!e.undeterminedStage&&(v=0>a?r-1:0,b=p[v]);b&&(a=b.getBoundingClientRect(),p=h[0].getBoundingClientRect(),0==v?h[0].scrollTop=0:a.top<p.top?h[0].scrollTop+=a.top-p.top:a.bottom>p.bottom&&(h[0].scrollTop+=a.bottom-p.bottom));d={type:"suggests:mark",oldSuggestIndex:l,oldSuggestData:0<=l&&n&&n[l]||null,oldSuggestNode:k,oldSuggest:c,newSuggestIndex:v,newSuggestData:0<=v&&n&&n[v]||null,newSuggestNode:b,newSuggest:c=b&&b.getAttribute("data-suggest")||
null,updateInputValue:f,findValue:s,originalEvent:d||null};e=e.selectInputDiff;f&&e?(B=(B=this.__prevSuggest.caret)?B.end:s.length,l=B+(c||"").length):l=B=-1;d.caretPositionStart=B;d.caretPositionEnd=l;if(!1!==this.fireTrigger(d))if(c=d.newSuggest,l=d.caretPositionEnd,B=d.caretPositionStart,void this._cancelMark(),b){if(m.addClass(b,this.opts.cnSelected),this.__currentMarked=b,f!=(f=d.updateInputValue)&&(f&&e&&-1===l&&B===l)&&(B=(B=this.__prevSuggest.caret)?B.end:s.length,l=B+(c||"").length),f=d.updateInputValue)this.__currentMarkedChangeValue=
this.__currentMarked}else this.__currentMarkedChangeValue=this.__currentMarked=null;else return!1}else c=k.attr("data-suggest");f&&this._findValue(c,null,f&&-1<B?B:void 0,f&&-1<l?l:void 0)}},_onselect:function(a,b,c,f,d,e){var h=this.opts,k=b.getAttribute("data-suggest"),l=b.getAttribute("data-suggest-idx")-1,n=this._cache[this.__val],p=this.$Input,r=this._getSuggestReplacement(),s=r?r.inputValue:p.val();d={type:"suggests:select",newSuggest:k,newSuggestData:n&&n[l],newSuggestIndex:l,newSuggestNode:b,
findValue:this.__val,inputValue:s,inputValueLeftPart:r?r.leftPart:"",inputValueRightPart:r?r.rightPart:"",inputSelectionStart:-1,inputSelectionEnd:-1,changeInputValue:!d,originalEvent:a||null,submitForm:f||!1};var B;c&&f||m.removeClass(b,h.cnSelected);b=h.onselect.call(this,d,this);if(!1!==b){if(!1!==(b=this.fireTrigger(d))){this.__currentMarkedChangeValue=this.__currentMarked=null;d.changeInputValue&&this._findValue(d.newSuggest,r,-1!=(l=d.inputSelectionStart)?l:void 0,-1!=(l=d.inputSelectionEnd)?
l:void 0);a&&!e&&(a.stopPropagation(),a.preventDefault());if(d.submitForm&&(a=p.closest("form")[0]))for(var l=a.length,t;l--;)if((t=a[l])&&"submit"==t.type){t.click();break}B=!0}e||this.$Input[0].focus();B&&this.hide()}this.__prevSuggest.caret=this.__prevSuggest.val=null;return b},_cancelMark:function(){var a=this.opts.cnSelected,b=this.$List.find("."+a);b.length&&b.removeClass(a);return b},_loaded:function(a,b,c){if(b||w.activeElement==this.$Input[0]){var f=this.opts,d=f.hideInactive;c={data:c,findValue:a,
type:"suggests:getData"};c.suggestValue=a;!1!==this.fireTrigger(c)&&(f.afterGetData&&f.afterGetData.call(this,c),this._cache[a]=c=c.data,f.ondata.call(this,a,c,this),!b&&(this._loadVal!=a||d&&this.blurred)||this._rebuild(a,void 0,void 0,void 0,!0===b))}},_rebuild:function(a,b,c,f,e){null==b?b=-1:f||(f=this.__ListItems&&this.__ListItems[b]);var h=this.opts,k=d(a),l=k?a.findValue:a,n=null!=l&&"string"==typeof l,v=n&&this._cache[l]||[],p=v&&!(!v.length&&!v.toArray),r=-1<b?b+(void 0!=c?c:h.fetchCount):
-1,s;c=h.grouping;v={type:"suggests:rebuild",showContainer:e||p&&n,showList:p,showInternet:h.showInternet,data:v,findValue:l,dataFrom:b,dataTo:r,markedItem:h.autoMarked};a=k?m.extend(a,v):v;a.suggest=l;v=a.data;!Array.isArray(v)&&v.toArray&&(v=v.toArray());a.showList=p;a.showContainer=a.showContainer&&(a.showList||a.showInternet);b=a.dataFrom;r=a.dataTo;if(a.showContainer&&!1!==this.fireTrigger(a)&&(f||this.__val!==(l=a.findValue!=l?a.findValue:a.suggest))){this.__inFetching=!1;this.__currentMarked=
f||null;this.__val=l;if(a.showList){p=-1<b?b+1:0;k=-1<r&&v.length>r?r+1:v.length;r=[];for(e=z(l);p<k;p++)if(n=v[p])c&&(d(n)&&n.groupHeader)&&r.push(m.trim(h.groupHeaderTemplate.call(this,n.groupHeader,e,n))),r.push(m.trim(h.template.call(this,e,n,p,v,l)));if(r.length)if(-1<b&&f)r=m(r.join("")),m(f).after(r),r=r.filter("."+h.cnItem),this.__ListItems.add(r),Array.forEach(r,function(a,c){a.setAttribute("data-suggest-idx",c+b+2)});else if(this.__ListItems=this.$List.html(r.join("")).find("."+h.cnItem).each(function(a,
b){b.setAttribute("data-suggest-idx",a+1)}),r=this.$List[0])r.scrollTop=0}h.ondraw.call(this,l,v,this)}delete a.dataFrom;delete a.dataTo;!1!==this._onExpand(a.showContainer,a)&&(this.$List.toggle(a.showList),this.$Suggest.toggle(a.showContainer),this.$InternetCont.toggle(a.showInternet));!this.__currentMarked&&(a.showContainer&&a.showList&&Number.isInteger(s=a.markedItem)&&0<=s)&&this._mark(s,void 0,void 0,!1);a.type="suggests:afterRebuild";this.fireTrigger(a);a.data=null},_request:function(a,b,c){this.opts.request(a,
b,c)},_internetVal:function(a){var b=this.opts;a=h(a);b.showInternet&&(this.$InternetCont.attr("href",b.searchUrl.replace("#query#",b.encodeBeforeSend?c(a):a)),!1!==(a=b.templateInternetVal.call(this,a,this.$InternetCont,this.$Internet))&&(b=this.$Internet,b.size()&&(b.attr("innerHTML","")[0].innerHTML=a)))},_onExpand:function(a,b,c){if(this.__expandedState!==a){this.opts.onexpand.call(this,a,this);b=b||{};b.type="suggests:"+(a?"show":"hide");c&&(b.originalEvent=c);if(!1===this.fireTrigger(b))return!1;
this.__expandedState=a}else return!1},val:function(a){return void 0!==a?(this._internetVal(a),this.$Input.val(a),""!=a||this._cache[a]||this.hide(),this):this._findValue()},getFindWords:function(){var a=this.opts,b=a.multiSuggests,c=a.suggestSeparator,f=this.$Input[0],d=f.value,e,h,k,m,l=null,n,p=a.suggestEscapeStart,s=p&&a.suggestEscapeEnd,t;if(a=this.hasTrigger("suggests:getSuggestWords suggests:getSuggestWords:AFTER")){t={type:"suggests:getSuggestWords",input:f,inputValue:d,data:null};if(!1===
this.fireTrigger(t))return[];d=t.inputValue}if(b){b=r.call(d,c);f=[];c=RegExp(c.source,(c.global?"g":"")+(c.ignoreCase?"i":"")+(c.multiline?"m":""));e=b.length;for(h=0;h<e;++h){k=b[h];(m=c.exec(d))&&(m=m[0]);if(p&&k)if(null!=l){if(s.test(k)){b[l]=f.slice(l,h).join("")+k;for(l++;l<=h;l++)b[l]=null;l=null}}else-1!=(n=k.search(p))&&-1==k.substr(n+1).search(s)&&(l=h);p&&(f[h]=b[h]+(m||""))}c=Array.filter(b,function(a){return!!a})}else c=[d];a&&(t.data=c,t.type="suggests:getSuggestWords:AFTER",!1!==this.fireTrigger(t)&&
(c=t.data));return c},_getSuggestReplacement:function(a){var b=this.opts,c=b.multiSuggests,f,d="",e,d=this.$Input,h=d.val(),k,l,n,p,s,t,w,z=null,D,C,I,J,K;if(c){f=this.__prevSuggest.caret||m.getCaretPosition(d[0]);if(!f)return;d=f.start;e=f.end;if(!this.__prevSuggest.caret){c=b.suggestSeparator;n=0;I=(C=b.suggestEscapeStart)&&b.suggestEscapeEnd;b=r.call(h,c);c=RegExp(c.source,(c.global?"g":"")+(c.ignoreCase?"i":"")+(c.multiline?"m":""));p=b.length;for(s=0;s<p;++s){t=b[s];(w=c.exec(h))&&(w=w[0]);C&&
t&&(null!=z?I.test(t)&&(n=b.slice(0,z).join("").length,t=b.slice(z,s+1).join(""),z=null):-1!=(D=t.search(C))&&-1==t.substr(D+1).search(I)&&(z=s));t=t.length;if((n+=t)>=d)if(null==z){d=n-t;e=n;break}else J||(J=n-t,K=n);w&&(n+=w.length);C&&w&&(b[s]+=w)}null!=z&&(d=J,e=K);f.start=d;f.end=e;this.__prevSuggest.caret=f}a?f=null:(k=h.substring(0,d),l=h.substring(e,h.length));return{position:f,start:d,end:e,value:h,leftPart:k,rightPart:l}}return null},_findValue:function(a,b,c,d){var e=void 0===a,h=this.opts,
k=this.$Input,l,n,p,r;b||(b=this._getSuggestReplacement(e));if(null===a&&(a=this.__val,null==a))return;b?(l=b.value,n=b.position,p=b.start,r=b.end,e?a=l.substring(p,r):(l=b.leftPart,b=b.rightPart,l=l+a+b,r=n.end=n.start+a.length)):e?a=k.val():h.searchLast||(l=a);l=h[e?"getSuggest":"setSuggest"].call(this,a,l,h,p,r);if(e)return this.__prevSuggest.val=l;this.val(l);void 0==r&&(r=l.length);Infinity==c&&(c=l.length);Infinity==d&&(d=l.length);m.setCaretPosition(k[0],void 0!=c?c:r,void 0!=d?d:r)},find:function(a,
b){var d=this.opts,f=d.ajaxUrl;d.needUpdateValue&&(d.needUpdateValue=!1,a=this._findValue());if(!b&&(!f||!a&&0<d.minLength))this.hide();else if(this._loadVal!=a||this._loadUrl!=f)this._loadUrl=f,this._loadVal=a,d.onsearch.call(this,a,this),this._request(f.replace("#query#",d.encodeBeforeSend?c(a):a)+"&"+Math.random(),this._loaded.bind(this,a,b),a)},set:function(a,b,c){this.opts[a]=b;"ajaxUrl"==a&&(this._cache=[],this.__val="");c||this.find(this.val());return this},get:function(a){return this.opts[a]},
reset:function(){var a=this._loadVal,b=this._cache[a];this.__val=this._loadVal=void 0;this._cache={};this.isExpanded()&&b&&(this._cache[a]=b)},show:function(a){this._rebuild(a||this.val())},hide:function(a){this._down=!1;if(!1===this._onExpand(!1,null,a))return!1;this.__currentMarkedChangeValue=null;this.$Suggest.hide();this._delayedHideEnd();clearTimeout(this._tid)},showSuggests:function(a,b,c,d){b&&void 0!=a&&this.val(a);void 0===a&&(a=this.val());void 0===c&&(c=this._cache[a]);d&&(this.$Input.attr("data-prevent-event-focus",
1),this.$Input[0].focus(),this.val(),this.blurred=!1);clearTimeout(this._tid);c?this._loaded(a,!0,c):this._tid=setTimeout(this.find.bind(this,a,!0),this.opts.timeout)},isExpanded:function(){return!0===this.__expandedState},_fetchMore:function(a,b){if(!this.opts.fetching)return!1;void 0===a&&(a=1);var c=this.__val,d=this._cache[c],e=(d&&d.length||0)-1,h=0<=e?this.__ListItems[e]:null;if(!h||!d||d.EOF)return!1;d={type:"suggests:fetch",fetchFrom:e,fetchCount:this.opts.fetchCount,fetchDirection:0>a?"UP":
"DOWN",data:d,findValue:c,EOF:!1,async:!1,currentDataLength:d.length,insertAfter:h};d.val=c;d.suggestValue=c;!1!=(c=this.fireTrigger(d))&&(!0!==d.async?(this[d.type](d,b),this.__inFetching=!1):this._asynchMarkers[d.type]?d.async=!1:(this._asynchMarkers||(this._asynchMarkers={}),d._asynchMarker=this._asynchMarkers[d.type]=+new Date,d._next_callback=b,d.next=this._callTriggerFunctionAsync,this.__inFetching=!d.EOF));return c},_fetchOnScroll:function(){if(this.isExpanded()&&!this.__inFetching){var a=
this.$List[0];a.offsetHeight+a.scrollTop+20>a.scrollHeight&&this._fetchMore()}},"suggests:fetch":function(a,b){var c=a.currentDataLength,d=a.insertAfter,e=a.suggestValue,h,k;b=b||a._next_callback;h=this._cache[e]=a.data;if(h.length==c||a.EOF)a.EOF=h.EOF=!0;if(h.EOF||!d&&!(d=this.__ListItems[a.fetchFrom]))k=a.result=!1;!1!==k&&(this._rebuild(e,a.fetchFrom,a.fetchCount,d),b&&b());this.__inFetching=!1;return k},getCurrentFindValue:function(){return this.__val},_hideIfNotActiveInput:function(){this._down=
!1;w.activeElement!=this.$Input[0]&&this.hide()},_delayedHideStart:function(){this.__delayedHide=setTimeout(this._hideIfNotActiveInput.bind(this),500)},_delayedHideEnd:function(){this.__delayedHide&&(clearTimeout(this.__delayedHide),this.__delayedHide=null)},_onMouseWheel:function(a){var b=a.wheelDelta||-1*a.detail;if(b){var c=a.currentTarget,d=c.scrollTop,e=c.scrollHeight,c=c.clientHeight;if(0<b?0==d:e<=c+d)a.preventDefault(),a.stopPropagation()}},_onScroll:function(){this._down=!1;this._delayedHideEnd()},
_fireActiveEvent:function(a){return this.fireTrigger({type:"suggests:active"+(a?"In":"Out")})}});p.prototype.getSuggestWords=p.prototype.getFindWords;n.ui.suggest=p}(document,this.ajs,this.ajs.$);
